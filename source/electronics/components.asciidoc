:stem:
:toc:
:toclevels: 1
:toc-title: Table of contents

= Components

== Motor driver

=== Requirements

* Should be capable of driving robot's motors: https://www.pololu.com/product/4751
** Brushed motor with quadrature encoder
** Rated voltage: 12V
** Stall current at 12V: 5.5A
** Maximum (continuous) power: 12W
* Maximum voltage from 4S battery is 16.8V (4x 4.2V).
* Driver does not need to be capable of driving the motor at stall current.
Driving the motor at stall current for longer period will overheat the motor.
* Motor's power can be higher than the rated power for a short duration.
* Driver should be capable of limiting the current somewhere between the stall current and maximum power limit (where current is 12W / 16.8V).

=== Recommended

==== DRV8874

* link:https://www.ti.com/product/DRV8874[Product page]
* link:https://www.ti.com/lit/ds/symlink/drv8874.pdf[Datasheet]

== Microcontroller

=== Requirements

* Should have enough timers:
** For generating PWM signals for drivers.
Typically, brushed motor drivers have 1 or 2 PWM inputs.
** For reading encoders outputs in encoder mode.
Encoders can be read with external interrupts, but using timer's encoder mode avoids the overhead of handling the interrupts.
** For generating PWM signal for thrower motor driver.
Thrower's brushless motor is driven by low cost ESC (electronic speed controller), that has 1 PWM signal input.
This PWM signal should be generated by a separate timer to be able to use different PWM frequency, since all PWM outputs from a timer have same the frequency.
** If servo motors are needed for the thrower, then additional PWM output is needed for each servo.
** Additional timer is needed to generate periodic interrupts for motor control code in the firmware.
* Should have USB interface or UART/USART interface if USB-UART bridge is used.

=== Recommended

==== STM32G431KB

* link:https://www.st.com/en/microcontrollers-microprocessors/stm32g431kb.html[Product page]
* link:https://www.st.com/resource/en/datasheet/stm32g431kb.pdf[Datasheet]
* link:https://www.st.com/resource/en/reference_manual/dm00355726-stm32g4-series-advanced-armbased-32bit-mcus-stmicroelectronics.pdf[Reference manual]

== USB connector

* For powering the microcontroller and for communicating with robot's computer.
* Micro USB Type B is commonly used.

=== Recommended

==== Amphenol 10118193-0001LF

* link:https://www.amphenol-icc.com/micro-usb-101181930001lf.html[Product page]
* link:https://www.snapeda.com/parts/10118193-0001LF/FCI/view-part/[Footprint]

==== Würth Elektronik 629105150521

* link:https://www.we-online.com/catalog/en/COM_MICRO_SMT_TYPE_B_HORIZONTAL_HIGH_CURRENT/[Product page]

== USB protection

=== Requirements

* TVS diodes compatible with USB voltages and signal speeds.

=== Recommended

==== Würth Elektronik 824011 TVS Diode

* link:https://www.we-online.com/catalog/en/WE-TVS-HS/[Product page]
* link:https://www.we-online.com/catalog/datasheet/824011.pdf[Datasheet]

== Voltage regulator for microcontroller

=== Requirements

* Input: 5V from USB.
* Output: 3.3V, >200mA
* For powering the microcontroller, encoders, isolators.

=== Recommended

* SOT23-5 package

== Voltage regulator at the motor driver's side

=== Requirements

* Input: 4S battery voltage (up to 16.8V).
* Output: 5V, >50mA
* For powering the isolators, driver pullup resistors.

=== Recommended

* SOT23-5 package

== Isolators

=== Requirements

* Should electrically isolate motors's battery from computer's battery to avoid short circuits on the motor's side damaging the computer.
* Signals between the microcontroller and motor drivers should go through isolator(s).
* Needs to work with 3.3V and 5V.

=== Recommended

* link:https://www.silabs.com/isolation/digital-isolators[Silicon Labs digital isolators]

=== SI8660BB-IU

* For 3 pairs of motor driver PWM signals
* QSOP16 package
* link:https://www.silabs.com/isolation/digital-isolators/si86xx-digital-isolators/device.si8660bb-iu[Product page]
* link:https://www.silabs.com/documents/public/data-sheets/Si866x.pdf[Datasheet]

=== SI8620BB-IS

* For thrower motor driver PWM
* SOIC8 package
* link:https://www.silabs.com/isolation/digital-isolators/si86xx-digital-isolators/device.si8620bb-is[Product page]
* link:https://www.silabs.com/documents/public/data-sheets/si861x-2x-datasheet.pdf[Datasheet]

== Encoder connectors

=== Requirements

* For connecting encoder power and signal wires to the microcontroller.
* 4 wires for each encoder.

=== Recommended

==== Micro-MaTch 215079-4

* link:https://www.te.com/global-en/product-215079-4.html[Product page]

== Thrower ESC connector

=== Requirements

* For connecting thrower motor controller.
* Only 2 wires (GND and PWM) are needed.

=== Recommended

==== Micro-MaTch 215079-4

* link:https://www.te.com/global-en/product-215079-4.html[Product page]

== Programmer connector

=== Requirements

* For connecting STLink programmer to the microcontroller.
** link:https://www.st.com/en/development-tools/stlink-v3mini.html[STLINK-V3MINI]

=== Recommended

==== Samtec FTSH-105-01-L-DV-K

* link:https://www.samtec.com/products/ftsh-105-01-l-dv-k[Product page]

== Reverse voltage protection

=== Requirements

* For avoiding reverse voltage damaging the components.
* Should be connected between positive supply instead of ground to avoid having different ground potentials.
* Simple and efficient solution is to use P-channel MOSFET.
* MOSFET's drain-source and gate-source rated voltages should be higher than battery voltage.
** If battery voltage is higher than gate-source voltage,
then zener diode can be used to clamp the gate voltage,
and a resistor can be used to limit current through zener diode.
** link:https://components101.com/articles/design-guide-pmos-mosfet-for-reverse-voltage-polarity-protection[More information]
** link:https://www.falstad.com/circuit/circuitjs.html?ctz=CQAgjCAMB0l3BWcAmWDLMgZgBxmcgCxg4CcS6IFkAUAO4haYhGSMBsOLhbYNAZo0iEWOLlmHc2WLOGhIYGGgHMhI5GLWNmtAE4curA1t61VWTlovidNAMpTHYAOztHvEPwCGAGwDOAKZQLDQASuCuLEQohtFsbDzgbvFQ8mERbsgIbviG2cEJbAC0YMkFaQxGVZpGtAAe4BIZ2lwupCAiYCIAKgD2yso+AQA6fn50AJYALgDGABajU72j814AdsojfgAOvT5eutMAnjQNYE1dSIS44IRcnW6hAQBuAbqBo897U16bo9u6XpTAIzKYTXprUaTKYLHZFACyAHk7AAxACi3RovXAIHYIkKpHaOmg+JYOKwNCAA[Falstad simulation]

=== Recommended

==== BUK6Y10-30P

* link:https://www.nexperia.com/products/mosfets/automotive-mosfets/BUK6Y10-30P.html[Product page]
* link:https://assets.nexperia.com/documents/data-sheet/BUK6Y10-30P.pdf[Datasheet]

== High current connections

=== Requirements

* For connecting power input from battery and outputs from motor drivers.

=== Recommended

* No separate components are needed.
* Simple rectangular SMD pads, where wires can be soldered, take little room and creates a reliable connection.
* Pad size can be 3 x 3 mm or larger for 18 AWG wire.

== LEDs

=== Requirements

* LEDs can be connected to microcontroller and used in firmware to indicate that something is working.
* LEDs can also be connected to voltage regulator output to indicate that the board has power.
* LED's brightness is controlled with current.
The simplest way to limit current is to use resistor in series with the LED.
* LED's current can be calculated with the following equation: asciimath:[I = (V_(s\upply) - V_F) / R]
, where _V~F~_ is LED's forward voltage. _V~F~_ can be found in the LED's datasheet.

=== Recommended

* 0603 SMD package.
* Current around 1 mA.
Higher currents usually make the LED too bright and waste energy.
Exact current is not that important if LED is used for visual indication
and can be changed later by replacing the resistor.